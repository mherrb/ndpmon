FLAGS=-Wall -pedantic -I../.. @CFLAGS@ @OPTIONS@
PLUGINS=@PLUGINS@
CC=@CC@
LIB=@LIBS@

all: $(PLUGINS)

# ---------------------
# Mac Resolution Plugin
# ---------------------

../../bin/mac_resolv.o: ./mac_resolv/mac_resolv.c
	#./mac_resolv/make-manuf
	-rm -f ./mac_resolv/manuf
	ln -sf @MANUF@ ./mac_resolv/manuf
	$(CC) $(FLAGS) `xml2-config  --cflags` -c ./mac_resolv/mac_resolv.c -o ../../bin/mac_resolv.o

# ----------------------
# Countermeasures Plugin
# ----------------------

../../bin/countermeasures.o: ../../bin/icmp_lib.o ../../bin/icmp_lib_nd.o ./countermeasures/countermeasures.c
	$(CC) $(FLAGS) -c ./countermeasures/countermeasures.c -o ../../bin/countermeasures.o

../../bin/icmp_lib.o: ./countermeasures/icmp_lib.c
	$(CC) $(FLAGS) -c ./countermeasures/icmp_lib.c -o ../../bin/icmp_lib.o

../../bin/icmp_lib_nd.o: ./countermeasures/icmp_lib_nd.c
	$(CC) $(FLAGS) -c ./countermeasures/icmp_lib_nd.c -o ../../bin/icmp_lib_nd.o

# -------------------
# Webinterface Plugin
# -------------------

../../bin/webinterface.o: ./webinterface/webinterface.c
	$(CC) $(FLAGS) -c `xml2-config  --cflags` ./webinterface/webinterface.c -o ../../bin/webinterface.o

# ------------
# Rules Plugin
# ------------

../../bin/rules.o: ../../bin/rules_matches.o ./rules/rules.c
	$(CC) $(FLAGS) -c `xml2-config  --cflags` ./rules/rules.c -o ../../bin/rules.o

../../bin/rules_matches.o: ./rules/rules_matches.c
	$(CC) $(FLAGS) -c `xml2-config  --cflags` ./rules/rules_matches.c -o ../../bin/rules_matches.o
	
# ------------
# Soap Plugin
# ------------

../../bin/soap.o: ./soap/soap.c
	$(CC) $(FLAGS) -c `xml2-config  --cflags` ./soap/soap.c -o ../../bin/soap.o
